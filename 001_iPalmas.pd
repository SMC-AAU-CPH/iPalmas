#N canvas 635 58 779 517 10;
#N canvas 474 233 896 427 patterns 0;
#X obj 223 17 loadbang;
#X obj 75 54 table compas;
#X text 465 66 bulerias;
#X text 444 125 soleas;
#X obj 580 71 sel 0 1 2 3 4 5 6 7;
#X obj 581 47 r set_compas;
#X obj 580 156 s style;
#X msg 606 135 BULERIAS;
#X msg 580 95 SOLEAS;
#X msg 221 50 \; compas resize 12 \; compas 0 1 0 0 1 0 0 1 0 1 0 1
0 \;;
#X msg 220 107 \; compas resize 12 \; compas 0 0 0 1 0 0 1 0 1 0 1
0 1 \;;
#X msg 220 233 \; compas resize 12 \; compas 0 1 0 1 0 1 0 0 1 0 0
1 0 \;;
#X text 437 240 siguiriyas;
#X text 443 297 fandangos;
#X msg 669 115 FANDANGOS;
#X msg 220 173 \; compas resize 12 \; compas 0 0 0 1 0 0 0 1 1 0 1
0 1 \;;
#X text 440 188 soleas alt;
#X msg 220 283 \; compas resize 12 \; compas 0 1 0 0 1 0 0 1 0 0 1
0 0 \;;
#X msg 625 96 SIGUIRIYAS;
#X msg 593 114 SOLEAS_ALT;
#X connect 0 0 9 0;
#X connect 4 0 8 0;
#X connect 4 0 10 0;
#X connect 4 1 19 0;
#X connect 4 1 15 0;
#X connect 4 2 7 0;
#X connect 4 2 9 0;
#X connect 4 3 11 0;
#X connect 4 3 18 0;
#X connect 4 4 14 0;
#X connect 4 4 17 0;
#X connect 5 0 4 0;
#X connect 7 0 6 0;
#X connect 8 0 6 0;
#X connect 14 0 6 0;
#X connect 18 0 6 0;
#X connect 19 0 6 0;
#X restore 630 112 pd patterns;
#N canvas 458 42 476 373 time_logic 0;
#X obj 125 190 sel 0 1;
#X obj 215 94 f 0;
#X obj 254 97 + 1;
#X obj 255 124 sel 11;
#X msg 230 55 0;
#X obj 157 38 t b;
#X obj 259 5 r ooi;
#X obj 218 125 s ind;
#X obj 125 15 inlet;
#X obj 219 222 t b;
#X obj 219 246 s main_clap;
#X obj 125 127 tabread compas;
#X obj 313 3 r set_tempo;
#X obj 313 63 bpm2ooi;
#X obj 219 196 pipe 100;
#X obj 343 94 s teacher_ooi;
#X obj 260 58 spigot;
#X obj 187 154 s read_compas;
#X obj 28 106 s sync_bang;
#X obj 312 153 / 2;
#X obj 144 225 s f_accent;
#X obj 125 245 s f_noaccent;
#X obj 25 190 sel 0 1;
#X obj 44 225 s s_accent;
#X obj 25 245 s s_noaccent;
#X obj 25 170 spigot;
#X obj 58 154 tgl 15 0 empty sordas empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 125 171 spigot;
#X obj 158 155 tgl 15 0 empty fuertes empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 58 324 s set_fuertes;
#X obj 158 324 s set_sordas;
#X msg 58 302 0;
#X msg 158 301 0;
#X obj 58 278 sel 1;
#X obj 158 278 sel 1;
#X obj 276 277 loadbang;
#X msg 276 296 1;
#X obj 368 23 r interact;
#X obj 370 43 == 1;
#X obj 126 67 metro 600;
#X obj 126 88 t b b;
#X connect 0 0 21 0;
#X connect 0 1 20 0;
#X connect 1 0 2 0;
#X connect 1 0 3 0;
#X connect 1 0 7 0;
#X connect 1 0 11 0;
#X connect 2 0 1 1;
#X connect 3 0 4 0;
#X connect 4 0 1 1;
#X connect 5 0 4 0;
#X connect 6 0 16 0;
#X connect 8 0 5 0;
#X connect 8 0 39 0;
#X connect 9 0 10 0;
#X connect 11 0 14 0;
#X connect 11 0 17 0;
#X connect 11 0 25 0;
#X connect 11 0 27 0;
#X connect 12 0 13 0;
#X connect 13 0 15 0;
#X connect 13 0 19 0;
#X connect 13 0 39 1;
#X connect 14 0 9 0;
#X connect 16 0 39 1;
#X connect 19 0 14 1;
#X connect 22 0 24 0;
#X connect 22 1 23 0;
#X connect 25 0 22 0;
#X connect 26 0 25 1;
#X connect 26 0 33 0;
#X connect 27 0 0 0;
#X connect 28 0 27 1;
#X connect 28 0 34 0;
#X connect 31 0 29 0;
#X connect 32 0 30 0;
#X connect 33 0 31 0;
#X connect 34 0 32 0;
#X connect 35 0 36 0;
#X connect 36 0 29 0;
#X connect 37 0 38 0;
#X connect 38 0 16 1;
#X connect 39 0 40 0;
#X connect 40 0 1 0;
#X connect 40 1 18 0;
#X restore 630 166 pd time_logic;
#X obj 633 260 flamenco_mode;
#N canvas 320 433 595 290 user_tables 0;
#X obj 83 82 table user-1;
#X obj 259 83 tabwrite user-1;
#X text 100 121 ei voi toimia oikein \, koska jos user taputtaa ennen
indeksin päivitystä \, taputus kirjataan samaan kohtaan edellisen kanssa.
pitäiskö tehdä switchi \, jolla valitaan joko ind tai ind+1 riippuen
siitä \, onko ind:lle jo kirjoitettu?;
#X msg 23 43 \; user-1 resize 12;
#X obj 24 23 loadbang;
#X obj 408 86 mod 12;
#X obj 408 64 + 1;
#X obj 375 98 f;
#X obj 495 79 !=;
#X obj 449 36 t f f;
#X floatatom 502 118 5 0 0 0 - - -;
#X obj 346 54 f;
#X obj 346 23 r ind;
#X obj 272 39 t f b;
#X obj 454 112 sel 0;
#X obj 213 10 r accent;
#X connect 4 0 3 0;
#X connect 5 0 7 1;
#X connect 6 0 5 0;
#X connect 7 0 1 1;
#X connect 8 0 10 0;
#X connect 8 0 14 0;
#X connect 9 0 8 1;
#X connect 9 1 8 0;
#X connect 11 0 1 1;
#X connect 11 0 6 0;
#X connect 11 0 9 0;
#X connect 12 0 11 1;
#X connect 13 0 1 0;
#X connect 13 1 11 0;
#X connect 14 0 7 0;
#X connect 15 0 13 0;
#X restore 632 229 pd user_tables;
#N canvas 0 316 1306 463 control_params 0;
#X obj 83 75 adc~;
#X obj 82 105 clap_tracker3;
#X obj 253 68 r int_tempo_dev;
#X obj 304 133 > 100;
#X obj 301 178 r teacher_ooi;
#X obj 311 348 s new_tempo;
#X obj 255 221 ooi2bpm;
#X obj 260 201 +;
#X obj 434 98 r ooi;
#X obj 371 133 /;
#X obj 515 192 -;
#X obj 540 239 + 2;
#X obj 543 262 s sync_diff;
#X obj 621 260 s tempo_matching;
#X obj 559 124 metro 100;
#X obj 559 145 s sync_bang_u;
#X obj 559 76 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 559 38 1;
#X obj 676 2 r mouse_bang;
#X obj 518 -3 r real_clap;
#X obj 379 263 s master_ooi;
#X obj 435 227 spigot;
#X obj 379 229 spigot;
#X obj 412 173 tgl 15 0 empty interact empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 442 188 == 0;
#X obj 253 133 < 50;
#X obj 157 33 r mouse_bang;
#X text 643 144 "phase lock";
#X obj 734 48 r clap_type;
#X obj 634 48 r read_compas;
#X obj 717 88 ==;
#X obj 755 85 ==;
#X obj 900 55 r ind;
#X obj 900 89 == 11;
#X obj 922 122 sel 1;
#X obj 894 182 tabread user-1;
#X obj 1005 182 tabread compas;
#X obj 997 93 f 0;
#X obj 1060 93 + 1;
#X msg 1039 143 0;
#X obj 988 58 metro 2;
#X msg 971 31 1;
#X obj 967 257 -;
#X obj 1003 257 +;
#X obj 1038 257 f;
#X obj 1002 235 *;
#X obj 1006 211 t f f;
#X obj 1083 238 t f b;
#X obj 1055 318 f;
#X obj 1055 412 s accentuation;
#X obj 900 36 t b;
#X obj 251 174 * -2;
#X obj 540 221 maxlib/scale -400 400 -1 1 0;
#X obj 1037 121 sel 11;
#X obj 1055 348 / 12;
#X obj 948 393 < 0.25;
#X obj 493 290 abs;
#X obj 300 289 spigot;
#X obj 311 312 spigot;
#X obj 562 193 * -1;
#X obj 491 317 < 0.05;
#X floatatom 444 302 5 0 0 0 - - -;
#X obj 427 39 loadbang;
#X msg 426 63 0;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 2 0 9 0;
#X connect 2 0 25 0;
#X connect 4 0 7 1;
#X connect 4 0 10 1;
#X connect 4 0 61 0;
#X connect 4 0 21 0;
#X connect 6 0 57 0;
#X connect 7 0 6 0;
#X connect 8 0 9 1;
#X connect 8 0 14 1;
#X connect 8 0 10 0;
#X connect 8 0 22 0;
#X connect 10 0 59 0;
#X connect 11 0 12 0;
#X connect 14 0 15 0;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 18 0 17 0;
#X connect 19 0 17 0;
#X connect 21 0 20 0;
#X connect 22 0 20 0;
#X connect 23 0 22 1;
#X connect 23 0 24 0;
#X connect 24 0 21 1;
#X connect 25 0 51 0;
#X connect 26 0 1 1;
#X connect 28 0 30 1;
#X connect 28 0 31 1;
#X connect 29 0 30 0;
#X connect 29 0 31 0;
#X connect 32 0 33 0;
#X connect 32 0 50 0;
#X connect 34 0 41 0;
#X connect 34 0 37 0;
#X connect 35 0 42 1;
#X connect 36 0 42 0;
#X connect 37 0 38 0;
#X connect 37 0 35 0;
#X connect 37 0 36 0;
#X connect 37 0 53 0;
#X connect 38 0 37 1;
#X connect 39 0 37 1;
#X connect 39 0 40 0;
#X connect 39 0 47 0;
#X connect 40 0 37 0;
#X connect 41 0 40 0;
#X connect 42 0 46 0;
#X connect 43 0 44 0;
#X connect 44 0 43 1;
#X connect 44 0 48 1;
#X connect 45 0 43 0;
#X connect 46 0 45 0;
#X connect 46 1 45 1;
#X connect 47 0 44 1;
#X connect 47 0 43 1;
#X connect 47 1 48 0;
#X connect 48 0 54 0;
#X connect 50 0 41 0;
#X connect 50 0 37 0;
#X connect 51 0 7 0;
#X connect 52 0 11 0;
#X connect 52 0 13 0;
#X connect 52 0 56 0;
#X connect 53 0 39 0;
#X connect 54 0 49 0;
#X connect 54 0 55 0;
#X connect 55 0 58 1;
#X connect 56 0 60 0;
#X connect 57 0 58 0;
#X connect 58 0 5 0;
#X connect 59 0 52 0;
#X connect 60 0 57 1;
#X connect 62 0 63 0;
#X connect 63 0 23 0;
#X restore 631 200 pd control_params;
#X obj 630 145 tgl 15 0 empty clapping empty 17 7 0 10 -262144 -1 -1
0 1;
#X text 652 142 receives clapping.;
#X obj 25 251 vradio 15 1 0 5 set_compas empty select_compas 0 -8 0
10 -262144 -1 -1 1;
#X obj 124 300 nbx 5 14 100 360 0 0 set_tempo new_tempo set_tempo 0
-8 0 10 -262144 -1 -1 300 256;
#X obj 60 369 nbx 5 14 0 100 0 0 clap_level empty output_gain_(dB)
0 -8 0 10 -262144 -1 -1 74 256;
#X obj 127 250 tgl 15 0 sordas set_sordas sordas 17 7 0 10 -262144
-1 -1 0 1;
#X obj 127 265 tgl 15 0 fuertes set_fuertes fuertes 17 7 0 10 -262144
-1 -1 1 1;
#X obj 304 238 vsl 15 128 0 200 0 0 empty int_tempo_dev int_tempo_dev
0 -9 0 10 -262144 -1 -1 0 1;
#X obj 409 239 vsl 15 128 0 1 0 0 empty accentuation accentuation 0
-9 0 10 -262144 -1 -1 3175 1;
#X obj 305 409 hsl 128 15 -4 4 0 0 empty tempo_matching tempo_matching
-2 -8 0 10 -262144 -1 -1 0 1;
#X obj 303 205 tgl 15 0 interact empty rhythmic_interaction_on/off
17 7 0 10 -262144 -1 -1 0 1;
#X obj 321 16 tgl 15 0 clapping empty teacher_on/off 17 7 0 10 -262144
-1 -1 0 1;
#X obj 321 37 tgl 15 0 crowd empty palmeros_on/off 17 7 0 10 -262144
-1 -1 1 1;
#X floatatom 304 376 5 0 0 0 - - -;
#X obj 378 118 bng 15 250 50 0 mouse_bang empty empty 17 7 0 10 -262144
-1 -1;
#X msg 333 89 0;
#X msg 367 88 1;
#X obj 299 130 s clap_type;
#X obj 403 95 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 301 157 tgl 15 0 input empty user_claps_on/off 17 7 0 10 -262144
-1 -1 0 1;
#X obj 429 125 r clap_type;
#X floatatom 431 149 5 0 0 0 - - -;
#X obj 431 73 r bpm;
#X floatatom 437 96 5 0 0 0 - - -;
#X text 19 41 1 Enable GEM;
#X obj 21 66 iPalmas;
#X text 22 216 2 Select Compas;
#X text 57 336 3 Select gain;
#X text 45 250 soleas;
#X text 45 265 alt. soleas;
#X text 45 280 bulerias;
#X text 45 295 siguiriyas;
#X text 45 310 fandangos;
#X floatatom 302 434 5 0 0 0 - - -;
#X floatatom 409 379 5 0 0 0 - - -;
#N canvas 0 22 450 300 trainer 0;
#X obj 105 136 tgl 15 0 train_on empty training_on 17 7 0 10 -262144
-1 -1 0 1;
#X obj 105 157 bng 15 250 50 0 train_done empty training_done 17 7
0 10 -262144 -1 -1;
#X obj 105 178 bng 15 250 50 0 read_default empty read_default 17 7
0 10 -262144 -1 -1;
#X msg 34 130 0;
#X connect 1 0 3 0;
#X connect 3 0 0 0;
#X coords 0 -1 1 1 105 100 1 100 100;
#X restore 634 296 pd trainer;
#X obj 486 169 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 522 126 r accent;
#X floatatom 522 154 5 0 0 0 - - -;
#X obj 632 38 loadbang;
#X msg 632 63 100;
#X obj 632 85 s new_tempo;
#X obj 33 454 tgl 15 0 empty empty blinkenlights_on/off 17 7 0 10 -262144
-1 -1 0 1;
#X obj 33 473 s GUI;
#X connect 5 0 1 0;
#X connect 12 0 18 0;
#X connect 13 0 39 0;
#X connect 14 0 38 0;
#X connect 20 0 19 0;
#X connect 20 0 22 0;
#X connect 21 0 19 0;
#X connect 21 0 22 0;
#X connect 23 0 19 0;
#X connect 23 0 22 0;
#X connect 25 0 26 0;
#X connect 25 0 41 0;
#X connect 27 0 28 0;
#X connect 42 0 43 0;
#X connect 44 0 45 0;
#X connect 45 0 46 0;
#X connect 47 0 48 0;
